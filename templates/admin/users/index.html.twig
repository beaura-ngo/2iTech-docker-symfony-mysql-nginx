{% extends "_layouts/_admin.html.twig" %}

{% block title %}Users Editor!
{% endblock %}

{% block h1 %}Users
{% endblock %}

{% block body %}
{% for type, messages in app.flashes() %}
	{% for message in messages %}
		<div class=" alert alert-{{ type }}" role="alert">
				<div>{{ message|raw }}</div>
		</div>
	{% endfor %}
{% endfor %}
	<!-- Users -->
	<div class="card shadow mb-4">
		<div class="card-header py-3">
			<h6 class="m-0 font-weight-bold text-primary">Users</h6>
		</div>
		<div class="card-body">
			<div class="table-responsive">
				<table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
					<thead>
						<tr>
							<th>Id</th>
							<th>Lastname</th>
							<th>Firstname</th>
							<th>Email</th>
							<th>Role</th>
							<th>Address</th>
							<th>Zipcode</th>
							<th>City</th>
							<th>Country</th>
							<th>Created At</th>
							<th>Modification</th>
						</tr>
					</thead>
					<tfoot>
						<tr>
							<th>Id</th>
							<th>Lastname</th>
							<th>Firstname</th>
							<th>Email</th>
							<th>Role</th>
							<th>Address</th>
							<th>Zipcode</th>
							<th>City</th>
							<th>Country</th>
							<th>Created At</th>
							<th>Modification</th>
						</tr>
					</tfoot>
					<tbody>
						<div>
							<a href="{{ path('admin_users_add' )}}" class="btn btn-danger">Add a new user</a>
						</div>
						{% if users is not empty %}
							{% for u in users %}
								<tr>
									<td>{{ u.id }}</td>
									<td>{{ u.lastname }}</td>
									<td>{{ u.firstname }}</td>
									<td>{{ u.email }}</td>
									<td>
										{% if u.roles is not empty %}
											{% for role in u.roles %}
												{{ role }}
											{% endfor %}
											{% else %}-
										{% endif %}
									</td>
									<td>{{ u.address }}</td>
									<td>{{ u.zipcode }}</td>
									<td>{{ u.city }}</td>
									<td>{{ u.country }}</td>
									<td>{{ u.createdAt|date('Y-m-d') }}</td>
									<td>
										<a href="{{ path('admin_users_edit', {'id': u.id}) }}" class="btn btn-success">Edit</a>
										<a href="{{ path('admin_users_delete', {'id': u.id}) }}" class="btn btn-warning">Delete</a>
									</td>
								</tr>
							{% endfor %}
						{% else %}
							<tr>
								No user yet...
							</tr>
						{% endif %}
					</tbody>
				</tbody>
			</table>
		</div>
	</div>
</div>{% endblock %}
